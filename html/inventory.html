<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Inventory â€” TRAMS DB</title>
<style>
:root{--bg:#0b1220;--panel:#0f172a;--ink:#e6f0ff;--muted:#9fb1c8;--brand:#22d3ee;--border:#22314d;--card:#121b2e}
*{box-sizing:border-box}body{margin:0;background:#0a0f1f;color:var(--ink);font:15px/1.55 system-ui}
.wrap{max-width:1100px;margin:22px auto;padding:0 16px}
.card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:16px}
.controls{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:10px}
input,select{padding:10px;border-radius:10px;border:1px solid var(--border);background:#0e1730;color:var(--ink)}
.btn{background:var(--brand);color:#001b22;border:none;border-radius:10px;padding:10px 12px;font-weight:700;cursor:pointer}
.table{width:100%;border-collapse:collapse;margin-top:10px}
.table th,.table td{padding:8px;border-bottom:1px solid var(--border)}
.notice{margin-top:10px;padding:10px;border:1px solid var(--border);border-radius:10px;background:#10203a;color:#cde7ff}
.topbar{display:flex;align-items:center;justify-content:space-between;padding:10px 16px;background:#0f172a;border-bottom:1px solid var(--border)}
.logo{font-weight:800}.logo b{color:var(--brand)}.nav{display:flex;gap:14px}.nav a{color:var(--muted)}
</style>
</head>
<body>
<header class="topbar">
  <a class="logo" href="?A=logged.html">ðŸš‹ <b>TRAMS</b> DB</a>
  <nav class="nav">
    <a href="?A=search_basic.html">Search</a>
    <a href="?A=logged.html">Dashboard</a>
  </nav>
</header>
<main class="wrap">
  <div class="card">
    <h1>Parts & Inventory</h1>
    <div class="controls">
      <input id="q" placeholder="Search partsâ€¦"/>
      <select id="cat"><option value="">All categories</option><option>Electrical</option><option>Mechanical</option><option>Body</option></select>
      <button id="search" class="btn">Search</button>
      <button id="reserve" class="btn">Reserve Selected</button>
    </div>
    <table class="table" id="tbl">
      <thead><tr><th></th><th>Part</th><th>Category</th><th>Stock</th><th>Location</th></tr></thead>
      <tbody id="tbody"></tbody>
    </table>
    <div id="notice" class="notice" hidden></div>
  </div>
</main>
<script>
const masterServer="http://localhost/tramsMNG";
const tbody=document.getElementById("tbody"); const notice=document.getElementById("notice");
document.getElementById("search").onclick=async()=>{
  const q=document.getElementById("q").value.trim(), cat=document.getElementById("cat").value;
  try{
    // const res=await fetch(`${masterServer}/api/Inv_Search.php`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({Token:sessionStorage.getItem('token'),Query:q,Category:cat})});
    // const rows=await res.json();
    const rows=[{id:1,part:'Pantograph carbon strip',cat:'Electrical',stock:12,loc:'Store A'},{id:2,part:'Brake caliper kit',cat:'Mechanical',stock:4,loc:'Store B'}];
    render(rows);
  }catch(e){show("Search failed: "+e.message,true);}
};
document.getElementById("reserve").onclick=async()=>{
  const ids=[...document.querySelectorAll('input[name=pick]:checked')].map(cb=>parseInt(cb.value,10));
  if(!ids.length) return show("Select at least one part to reserve.",true);
  try{
    // const res=await fetch(`${masterServer}/api/Inv_Reserve.php`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({Token:sessionStorage.getItem('token'),PartIDs:ids})});
    // const j=await res.json(); if(!res.ok) throw new Error(j?.error||res.statusText);
    show("Reservation placed (demo).");
  }catch(e){show("Reserve failed: "+e.message,true);}
};
function render(rows){tbody.innerHTML=rows.map(r=>`<tr><td><input type="checkbox" name="pick" value="${r.id}"/></td><td>${r.part}</td><td>${r.cat}</td><td>${r.stock}</td><td>${r.loc}</td></tr>`).join("");}
function show(msg,err=false){notice.hidden=false;notice.textContent=msg;notice.style.color=err?"#ffd0d0":"#eaffff";}
</script>
</body>
</html>
